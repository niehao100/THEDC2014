#include "thedc.h"

int check[4]={1,1,1,1};
void (*target[4])(int judge)={&target1,&target2,&target3,&target4};

void get_score(int x,int y){
	int score=0,time=0;
	move_to_exact(x,y);
	if(S_flag){
			score=Position[5+5*Position[0]];
			time=Position[22];
			GPIOPinWrite(GPIO_PORTF_BASE, GPIO_PIN_1|GPIO_PIN_2|GPIO_PIN_3, 0x08);
			for(;S_flag==1;){
				for(i=0;i<500;i++);
				if(Position[23]==0x00) goto begin;
				if(Position[22]<(time-7)) break;
				if(Position[5+5*Position[0]]!=score) 	break;
				}
			GPIOPinWrite(GPIO_PORTF_BASE, GPIO_PIN_1|GPIO_PIN_2|GPIO_PIN_3, 0x0);
			for(i=0;i<4;i++) check[i]=1;
				check[int(place/10)]=0;
				continue;
			}
			else{
					check[int(place/10)]=0;S_flag=1;
				}
}




int place(int head_x,int head_y)
{
    if(head_x<=127.5&&head_y<=127.5)
    {
        if(head_x>=head_y){
            if(head_x>70)
                return 11;
            return 14;
        }
        if(head_y>70)
            return 12;
        return 13;
    }
    if(head_x>127.5&&head_y<=127.5){
        if(head_x>=255-head_y){
            if(head_y>70)
                return 22;
            return 23;
        }
        if(255-head_x>70)
             return 21;
        return 24;
    }
    if(head_x>127.5&&head_y>127.5)
    {
        if(head_x>=head_y) {
            if(255-head_y>70)
            	return 32;
            return 33;
        }
        if(255-head_x>70)
            return 31;
        return 34;
    }
    if(head_x<127.5&&head_y>127.5)
    {
        if(255-head_x>=head_y)
        {
            if(255-head_y>70)
            	return 42;
            return 43;
        }

        if(head_x>70)
        	return 41;
        return 44;
    }
}

void target1(int judge)
{
    if(judge/10==1)
    {
        if(judge%10==1)
        {
            move_to(96.25,55);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==2)
        {
            move_to(55,96.25);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==3)
        {
            move_to(head_x,90);//竖直移动到II区
            move_to(55,96.25);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==4)
        {
            move_to(90,head_y);//水平移动到I区
            move_to(96.25,55);
            head(55,55);
            move_to(55,55);
        }
    }
    if(judge/10==2)
    {
        if(judge%10==1)
        {
            move_to(96.25,55);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==2)
        {
            move_to(55,96.25);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==3)
        {
            move_to(head_x,90);
            move_to(55,96.25);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==4)
        {
            move_to(150,head_y);
            move_to(96.25,55);
            head(55,55);
            move_to(55,55);
        }
    }
    if(judge/10==3)
    {
        if(judge%10==1)
        {
            move_to(96.25,55);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==2)
        {
            move_to(55,96.25);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==3)
        {
            move_to(head_x,90);
            move_to(55,96.25);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==4)
        {
            move_to(150,head_y);
            move_to(96.25,55);
            head(55,55);
            move_to(55,55);
        }
    }
    if(judge/10==4)
    {
        if(judge%10==1)
        {
            move_to(96.25,55);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==2)
        {
            move_to(55,96.25);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==3)
        {
            move_to(head_x,90);
            move_to(55,96.25);
            head(55,55);
            move_to(55,55);
        }
        if(judge%10==4)
        {
            move_to(90,head_y);
            move_to(96.25,55);
            head(55,55);
            move_to(55,55);
        }
    }
}

void target2(int judge)
{
    if(judge/10==1)
    {
        if(judge%10==1)
        {
            move_to(150,55);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==2)
        {
            move_to(200,96.25);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==3)
        {
            move_to(head_x,90);//竖直移动到II区
            move_to(200,96.25);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==4)
        {
            move_to(90,head_y);//水平移动到I区
            move_to(150,55);
            head(200,55);
            move_to(200,55);
        }
    }
    if(judge/10==2)
    {
        if(judge%10==1)
        {
            move_to(150,55);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==2)
        {
            move_to(200,96.25);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==3)
        {
            move_to(head_x,90);
            move_to(200,96.25);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==4)
        {
            move_to(150,head_y);
            move_to(150,55);
            head(200,55);
            move_to(200,55);
        }
    }
    if(judge/10==3)
    {
        if(judge%10==1)
        {
            move_to(150,55);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==2)
        {
            move_to(200,96.25);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==3)
        {
            move_to(head_x,150);
            move_to(200,96.25);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==4)
        {
            move_to(90,head_y);
            move_to(150,55);
            head(200,55);
            move_to(200,55);
        }
    }
    if(judge/10==4)
    {
        if(judge%10==1)
        {
            move_to(150,55);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==2)
        {
            move_to(200,96.25);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==3)
        {
            move_to(head_x,150);
            move_to(200,96.25);
            head(200,55);
            move_to(200,55);
        }
        if(judge%10==4)
        {
            move_to(150,head_y);
            move_to(150,55);
            head(200,55);
            move_to(200,55);
        }
    }
}

void target3(int judge)
{
    if(judge/10==1)
    {
        if(judge%10==1)
        {
            move_to(150,200);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==2)
        {
            move_to(200,150);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==3)
        {
            move_to(head_x,90);//竖直移动到II区
            move_to(200,150);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==4)
        {
            move_to(90,head_y);//水平移动到I区
            move_to(150,200);
            head(200,200);
            move_to(200,200);
        }
    }
    if(judge/10==2)
    {
        if(judge%10==1)
        {
            move_to(150,200);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==2)
        {
            move_to(200,150);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==3)
        {
            move_to(head_x,90);
            move_to(200,150);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==4)
        {
            move_to(150,head_y);
            move_to(150,200);
            head(200,200);
            move_to(200,200);
        }
    }
    if(judge/10==3)
    {
        if(judge%10==1)
        {
            move_to(150,200);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==2)
        {
            move_to(200,150);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==3)
        {
            move_to(head_x,150);
            move_to(200,150);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==4)
        {
            move_to(90,head_y);
            move_to(150,200);
            head(200,200);
            move_to(200,200);
        }
    }
    if(judge/10==4)
    {
        if(judge%10==1)
        {
            move_to(150,200);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==2)
        {
            move_to(200,150);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==3)
        {
            move_to(head_x,150);
            move_to(200,150);
            head(200,200);
            move_to(200,200);
        }
        if(judge%10==4)
        {
            move_to(150,head_y);
            move_to(150,200);
            head(200,200);
            move_to(200,200);
        }
    }
}

void target4(int judge)
{
    if(judge/10==1)
    {
        if(judge%10==1)
        {
            move_to(90,200);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==2)
        {
            move_to(55,165);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==3)
        {
            move_to(head_x,90);//竖直移动到II区
            move_to(55,165);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==4)
        {
            move_to(90,head_y);//水平移动到I区
            move_to(90,200);
            head(55,200);
            move_to(55,200);
        }
    }
    if(judge/10==2)
    {
        if(judge%10==1)
        {
            move_to(90,200);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==2)
        {
            move_to(55,165);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==3)
        {
            move_to(head_x,90);
            move_to(55,165);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==4)
        {
            move_to(150,head_y);
            move_to(90,200);
            head(55,200);
            move_to(55,200);
        }
    }
    if(judge/10==3)
    {
        if(judge%10==1)
        {
            move_to(90,200);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==2)
        {
            move_to(55,165);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==3)
        {
            move_to(head_x,150);
            move_to(55,165);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==4)
        {
            move_to(90,head_y);
            move_to(90,200);
            head(55,200);
            move_to(55,200);
        }
    }
    if(judge/10==4)
    {
        if(judge%10==1)
        {
            move_to(90,200);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==2)
        {
            move_to(55,165);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==3)
        {
            move_to(head_x,150);
            move_to(55,165);
            head(55,200);
            move_to(55,200);
        }
        if(judge%10==4)
        {
            move_to(150,head_y);
            move_to(90,200);
            head(55,200);
            move_to(55,200);
        }
    }
}